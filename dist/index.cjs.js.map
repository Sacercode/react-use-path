{"version":3,"file":"index.cjs.js","sources":["../src/index.js"],"sourcesContent":["\r\nimport { useState } from \"react\";\r\n\r\nexport const usePath = (onMove) => {\r\n    const [currentPath, setCurrentPath] = useState([]);\r\n\r\n    const currentPathString = currentPath.join(\"/\");\r\n\r\n    function goBack(index) {\r\n        if(typeof index === \"number\" && index >= 0) {\r\n            var tmp = [...currentPath];\r\n            while(tmp.length - 1 > index && tmp.length > 0) {\r\n                tmp.pop();\r\n            }\r\n            setCurrentPath(tmp);\r\n            if (typeof onMove == \"function\") {\r\n                onMove(tmp);\r\n            }\r\n        } else if (currentPath.length > 0) {\r\n            const tmp = [...currentPath];\r\n            tmp.pop();\r\n            setCurrentPath(tmp);\r\n            if (typeof onMove == \"function\") {\r\n                onMove(tmp);\r\n            }\r\n        }\r\n    }\r\n\r\n    function customSetCurrentPath(value) {\r\n        let processedValue;\r\n\r\n        if ([false, true, null, undefined].includes(value)) {\r\n            processedValue = [];\r\n        } else if (typeof value === \"string\") {\r\n            processedValue = value === \"\" ? [] : value.split(\"/\");\r\n        } else if (\r\n            typeof value === \"number\" || typeof value === \"bigint\"\r\n            || (\r\n                typeof value === \"object\" && !Array.isArray(value)\r\n            ) \r\n        ) {\r\n            processedValue = [value];\r\n        } else {\r\n            processedValue = value;\r\n        }\r\n        \r\n        setCurrentPath(processedValue);\r\n        if (typeof onMove == \"function\") {\r\n            onMove(processedValue);\r\n        }\r\n    }\r\n\r\n    function goHome() {\r\n        setCurrentPath([]);\r\n        if (typeof onMove == \"function\") {\r\n            onMove([]);\r\n        }\r\n    }\r\n\r\n    function goTo(path) {\r\n        if(typeof path === \"string\" && path.length) {\r\n            let newCurrentPath;\r\n            \r\n            // Si le chemin commence par \"/\", c'est un chemin absolu\r\n            if (path.startsWith(\"/\")) {\r\n                newCurrentPath = [];\r\n                // On enlève le \"/\" initial pour le traitement\r\n                path = path.substring(1);\r\n            } else {\r\n                // Chemin relatif, on part du chemin actuel\r\n                newCurrentPath = [...currentPath];\r\n            }\r\n    \r\n            if (arguments.length > 1) {\r\n                for(var i = 0; i < arguments.length; i++) {\r\n                    const argument = arguments[i];\r\n                    newCurrentPath.push(argument);\r\n                }\r\n            } else if(typeof path == \"string\") {\r\n                // Seulement si il reste quelque chose après avoir enlevé le \"/\" initial\r\n                if (path.length > 0) {\r\n                    path.split(\"/\").forEach(\r\n                        (ressource) => {\r\n                            if (ressource === \"..\") {\r\n                                newCurrentPath.pop();\r\n                            } else if (ressource !== \".\" && ressource !== \"\") {\r\n                                newCurrentPath.push(ressource);\r\n                            }\r\n                        }\r\n                    );\r\n                }\r\n            }\r\n            \r\n            setCurrentPath(newCurrentPath);\r\n            if (typeof onMove == \"function\") {\r\n                onMove(newCurrentPath);\r\n            }\r\n        }\r\n    }\r\n\r\n    return {\r\n        currentPath,\r\n        currentPathString,\r\n        setCurrentPath: customSetCurrentPath,\r\n        goTo,\r\n        goBack,\r\n        goHome,\r\n    };\r\n}"],"names":["usePath","onMove","currentPath","setCurrentPath","useState","currentPathString","goBack","index","tmp","customSetCurrentPath","value","processedValue","goHome","goTo","path","newCurrentPath","i","argument","ressource"],"mappings":"yGAGaA,EAAWC,GAAW,CAC/B,KAAM,CAACC,EAAaC,CAAc,EAAIC,EAAAA,SAAS,CAAA,CAAE,EAE3CC,EAAoBH,EAAY,KAAK,GAAG,EAE9C,SAASI,EAAOC,EAAO,CACnB,GAAG,OAAOA,GAAU,UAAYA,GAAS,EAAG,CAExC,QADIC,EAAM,CAAC,GAAGN,CAAW,EACnBM,EAAI,OAAS,EAAID,GAASC,EAAI,OAAS,GACzCA,EAAI,IAAG,EAEXL,EAAeK,CAAG,EACd,OAAOP,GAAU,YACjBA,EAAOO,CAAG,CAElB,SAAWN,EAAY,OAAS,EAAG,CAC/B,MAAMM,EAAM,CAAC,GAAGN,CAAW,EAC3BM,EAAI,IAAG,EACPL,EAAeK,CAAG,EACd,OAAOP,GAAU,YACjBA,EAAOO,CAAG,CAElB,CACJ,CAEA,SAASC,EAAqBC,EAAO,CACjC,IAAIC,EAEA,CAAC,GAAO,GAAM,KAAM,MAAS,EAAE,SAASD,CAAK,EAC7CC,EAAiB,CAAA,EACV,OAAOD,GAAU,SACxBC,EAAiBD,IAAU,GAAK,CAAA,EAAKA,EAAM,MAAM,GAAG,EAEpD,OAAOA,GAAU,UAAY,OAAOA,GAAU,UAE1C,OAAOA,GAAU,UAAY,CAAC,MAAM,QAAQA,CAAK,EAGrDC,EAAiB,CAACD,CAAK,EAEvBC,EAAiBD,EAGrBP,EAAeQ,CAAc,EACzB,OAAOV,GAAU,YACjBA,EAAOU,CAAc,CAE7B,CAEA,SAASC,GAAS,CACdT,EAAe,CAAA,CAAE,EACb,OAAOF,GAAU,YACjBA,EAAO,CAAA,CAAE,CAEjB,CAEA,SAASY,EAAKC,EAAM,CAChB,GAAG,OAAOA,GAAS,UAAYA,EAAK,OAAQ,CACxC,IAAIC,EAYJ,GATID,EAAK,WAAW,GAAG,GACnBC,EAAiB,CAAA,EAEjBD,EAAOA,EAAK,UAAU,CAAC,GAGvBC,EAAiB,CAAC,GAAGb,CAAW,EAGhC,UAAU,OAAS,EACnB,QAAQc,EAAI,EAAGA,EAAI,UAAU,OAAQA,IAAK,CACtC,MAAMC,EAAW,UAAUD,CAAC,EAC5BD,EAAe,KAAKE,CAAQ,CAChC,MACM,OAAOH,GAAQ,UAEjBA,EAAK,OAAS,GACdA,EAAK,MAAM,GAAG,EAAE,QACXI,GAAc,CACPA,IAAc,KACdH,EAAe,IAAG,EACXG,IAAc,KAAOA,IAAc,IAC1CH,EAAe,KAAKG,CAAS,CAErC,CACxB,EAIYf,EAAeY,CAAc,EACzB,OAAOd,GAAU,YACjBA,EAAOc,CAAc,CAE7B,CACJ,CAEA,MAAO,CACH,YAAAb,EACA,kBAAAG,EACA,eAAgBI,EAChB,KAAAI,EACA,OAAAP,EACA,OAAAM,CACR,CACA"}